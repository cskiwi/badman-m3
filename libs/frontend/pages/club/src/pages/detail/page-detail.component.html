@if (!loading()) {
  @if (this.club(); as club) {
    <!-- Club Header -->
    <app-page-header>
      <i avatar class="pi pi-building text-2xl"></i>
      <span title>{{ club.fullName || club.name }}</span>
      <ng-container subTitle>
        @if (club.clubId) {
          <span>{{ club.clubId }}</span>
        }
        @if (club.state || club.country) {
          <span>â€¢</span>
          <span>{{ club.state }}{{ club.state && club.country ? ', ' : '' }}{{ club.country }}</span>
        }
      </ng-container>
      <ng-container actions>
        <p-select
          id="season-select"
          [formControl]="seasonControl"
          [options]="availableSeasons()"
          optionLabel="label"
          optionValue="value"
          [style]="{ 'min-width': '140px' }"
          placeholder="{{ 'all.common.selectSeason' | translate }}"
        />
      </ng-container>
    </app-page-header>

    <!-- Main Content Tabs -->
    <p-tabs value="0">
      <p-tablist>
        <p-tab value="0">
          <i class="pi pi-users mr-2"></i>
          {{ 'all.team.overview.title' | translate }}
        </p-tab>
        <p-tab value="1">
          <i class="pi pi-user mr-2"></i>
          {{ 'all.club.playerRoster' | translate }}
        </p-tab>
        <p-tab value="2">
          <i class="pi pi-chart-line mr-2"></i>
          {{ 'all.club.performance' | translate }}
        </p-tab>
        <p-tab value="3">
          <i class="pi pi-calendar mr-2"></i>
          {{ 'all.club.schedule' | translate }}
        </p-tab>
        <p-tab value="4">
          <i class="pi pi-trophy mr-2"></i>
          {{ 'all.club.tournaments.tab' | translate }}
        </p-tab>
      </p-tablist>

      <p-tabpanels>
        <!-- Teams Tab -->
        <p-tabpanel value="0">
          <app-club-teams-tab
            [clubId]="club.id"
            [season]="currentSeason()"
            [canEditTeamFn]="canEditTeam.bind(this)"
            (editTeamClicked)="editTeam($event)"
          />
        </p-tabpanel>

        <!-- Player Roster Tab -->
        <p-tabpanel value="1">
          <!-- <app-club-players-tab [clubId]="club.id" [season]="currentSeason()" /> -->
        </p-tabpanel>

        <!-- Performance Charts Tab -->
        <p-tabpanel value="2">
          <app-club-performance-tab [clubId]="club.id" [season]="currentSeason()" />
        </p-tabpanel>

        <!-- Match Schedule & Results Tab -->
        <p-tabpanel value="3">
          <app-club-schedule-tab [clubId]="club.id" [season]="currentSeason()" />
        </p-tabpanel>

        <!-- Tournaments Tab -->
        <p-tabpanel value="4">
          <app-club-tournaments-tab
            [clubId]="club.id"
            [canCreate]="canCreateTournament()"
            (createTournament)="createTournament()"
          />
        </p-tabpanel>
      </p-tabpanels>
    </p-tabs>
  }
} @else {
  <p-progressbar mode="indeterminate" [style]="{ height: '6px' }" />
}

@if (error()) {
  <div class="error flex items-center gap-2 p-4 text-red-600">
    <i class="pi pi-exclamation-triangle"></i>
    {{ error() }}
  </div>
}
