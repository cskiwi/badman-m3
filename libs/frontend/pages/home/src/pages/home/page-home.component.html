<!-- @if (!loading()) { -->
<app-page-header>
  <!-- <ng-content avatar>{{ this.initials() }}</ng-content> -->
  <ng-content title>Home</ng-content>
  <ng-content subTitle>
    <div class="info">
      <!-- <div class="click-for-breakdown">
      {{ 'all.ranking.breakdown.hint' | translate }}
    </div> -->
  </div>
</ng-content>
</app-page-header>
<p>
  {{ 'all.landing.description' | translate }}
</p>
<section class="ranking">
  @if (isBrowser()) {
    <p-table
      [value]="dataSource()"
      [loading]="loading()"
      [sortField]="'level'"
      [sortOrder]="1"
      styleClass="p-datatable-sm"
      >
      <ng-template pTemplate="header">
        <tr>
          @for (col of columns; track col) {
            <th [pSortableColumn]="col.field">
              {{ col.header | async }}
              <p-sortIcon [field]="col.field"></p-sortIcon>
            </th>
          }
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-rowData>
        <tr>
          @for (col of columns; track col) {
            <td>
              {{ rowData[col.field] }}
            </td>
          }
        </tr>
      </ng-template>
    </p-table>
  } @else {
    <!-- SSR fallback -->
    <div class="p-4 text-center">
      <i class="pi pi-spin pi-spinner text-2xl"></i>
      <p class="mt-2">Loading table...</p>
    </div>
  }
</section>


@if (error()) {
  <div class="error flex items-center gap-2 p-4 text-red-600">
    <i class="pi pi-exclamation-triangle"></i>
    {{ error() }}
  </div>
}
