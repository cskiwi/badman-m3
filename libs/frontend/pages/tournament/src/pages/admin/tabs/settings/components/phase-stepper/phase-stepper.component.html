<div class="bg-card rounded-border border border-card overflow-hidden">
  <!-- Header -->
  <div class="bg-card-header px-6 py-4 border-b border-card">
    <div class="flex items-center gap-3">
      <div class="w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center">
        <i class="pi pi-flag text-primary text-lg"></i>
      </div>
      <div>
        <h3 class="text-lg font-semibold text-color m-0">{{ 'all.tournament.admin.settings.phase' | translate }}</h3>
        <p class="text-sm text-muted-color m-0">{{ 'all.tournament.admin.settings.phaseDescription' | translate }}</p>
      </div>
    </div>
  </div>

  <!-- Stepper Content -->
  <div class="p-6">
    <p-stepper [value]="currentPhaseIndex() + 1" [linear]="true">
      <p-step-list>
        @for (step of phaseSteps; track step.phase; let i = $index) {
          <p-step [value]="i + 1">
            <ng-template #content let-activateCallback="activateCallback" let-value="value">
              <button
                class="bg-transparent border-0 inline-flex flex-col items-center gap-3 cursor-default p-2 rounded-lg transition-all duration-200 hover:bg-surface-100 dark:hover:bg-surface-800"
                [pTooltip]="step.description | translate"
                tooltipPosition="bottom"
              >
                <span
                  class="rounded-full w-12 h-12 inline-flex items-center justify-center transition-all duration-300 shadow-sm"
                  [ngClass]="{
                    'bg-primary text-primary-contrast shadow-md': value <= currentPhaseIndex() + 1,
                    'bg-surface-100 dark:bg-surface-700 text-muted-color border-2 border-surface-300 dark:border-surface-600': value > currentPhaseIndex() + 1
                  }"
                >
                  <i [class]="step.icon" class="text-lg"></i>
                </span>
                <span
                  class="text-xs font-semibold text-center max-w-24 leading-tight"
                  [ngClass]="{
                    'text-primary': value <= currentPhaseIndex() + 1,
                    'text-muted-color': value > currentPhaseIndex() + 1
                  }"
                >
                  {{ step.label | translate }}
                </span>
              </button>
            </ng-template>
          </p-step>
        }
      </p-step-list>
    </p-stepper>

    <!-- Phase Navigation -->
    <div class="flex gap-3 mt-6 justify-center pt-4 border-t border-card">
      <p-button
        [label]="'all.tournament.admin.settings.previousPhase' | translate"
        icon="pi pi-arrow-left"
        severity="secondary"
        [outlined]="true"
        [disabled]="!canGoBack() || updating()"
        [loading]="updating()"
        (click)="goBackPhase()"
      />
      <p-button
        [label]="'all.tournament.admin.settings.nextPhase' | translate"
        icon="pi pi-arrow-right"
        iconPos="right"
        [disabled]="!canAdvance() || updating()"
        [loading]="updating()"
        (click)="advancePhase()"
      />
    </div>
  </div>
</div>
