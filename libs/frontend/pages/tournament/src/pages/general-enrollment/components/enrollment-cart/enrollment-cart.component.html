<div class="rounded-border bg-surface-0 dark:bg-surface-900 border border-surface-200 dark:border-surface-700 overflow-hidden">
  <!-- Header -->
  <div class="flex items-center gap-3 p-4 border-b border-surface-200 dark:border-surface-700 bg-primary-50 dark:bg-primary-900/20">
    <i class="pi pi-shopping-cart text-2xl text-primary-600 dark:text-primary-400"></i>
    <div class="flex-1">
      <span class="font-semibold text-lg text-color">{{ 'all.enrollment.cart.title' | translate }}</span>
      @if (items().length > 0) {
        <div>
          <span class="text-sm text-muted-color"
            >{{ items().length }}
            {{ (items().length !== 1 ? 'all.enrollment.cart.eventsSelected' : 'all.enrollment.cart.eventSelected') | translate }}</span
          >
        </div>
      }
    </div>
    @if (items().length > 0) {
      <p-badge [value]="items().length.toString()" severity="success" size="large" />
    }
  </div>

  <!-- Content -->
  <div class="p-4 min-h-[300px]">
    @if (items().length === 0) {
      <div class="flex flex-col items-center justify-center py-12 text-center">
        <i class="pi pi-shopping-cart text-6xl mb-4 text-muted-color opacity-20"></i>
        <p class="text-lg text-color mb-1">{{ 'all.enrollment.cart.empty' | translate }}</p>
        <p class="text-sm text-muted-color">{{ 'all.enrollment.cart.emptyDescription' | translate }}</p>
      </div>
    } @else {
      <div class="space-y-3">
        @for (item of items(); track item.subEventId) {
          <div
            class="flex items-start gap-3 p-3 rounded-lg bg-surface-50 dark:bg-surface-800 hover:bg-surface-100 dark:hover:bg-surface-700 transition-colors"
          >
            <i [class]="'pi ' + getEventTypeIcon(item.eventType) + ' text-xl text-primary-500'"></i>
            <div class="flex-1 min-w-0">
              <div class="font-medium text-color mb-1">{{ item.subEventName }}</div>
              <div class="flex items-center gap-2 text-sm text-muted-color">
                <span class="capitalize">{{ item.gameType }}</span>
                @if (item.preferredPartnerId) {
                  <span class="flex items-center gap-1">
                    <i class="pi pi-users text-xs"></i>
                    {{ 'all.enrollment.cart.partnerSelected' | translate }}
                  </span>
                }
              </div>
            </div>
            <p-button
              icon="pi pi-trash"
              severity="danger"
              [text]="true"
              [rounded]="true"
              size="small"
              (onClick)="onRemoveItem(item.subEventId)"
              [ariaLabel]="'Remove ' + item.subEventName"
            />
          </div>
        }
      </div>

      <!-- Summary -->
      <div class="mt-6 pt-4 border-t border-surface-200 dark:border-surface-700">
        <div class="flex items-center justify-between text-lg">
          <span class="font-medium text-color">{{ 'all.enrollment.cart.totalEvents' | translate }}</span>
          <span class="font-bold text-primary-600 dark:text-primary-400">{{ items().length }}</span>
        </div>
      </div>
    }
  </div>

  <!-- Footer Actions -->
  @if (items().length > 0) {
    <div class="flex gap-3 p-4 border-t border-surface-200 dark:border-surface-700 bg-surface-50 dark:bg-surface-800">
      <p-button
        [label]="'all.enrollment.cart.clear' | translate"
        icon="pi pi-times"
        severity="secondary"
        [outlined]="true"
        (onClick)="onClearCart()"
        [disabled]="isSubmitting()"
        styleClass="flex-shrink-0"
      />
      <p-button
        [label]="'all.enrollment.cart.enrollNow' | translate"
        icon="pi pi-check-circle"
        severity="success"
        (onClick)="onSubmitCart()"
        [disabled]="isSubmitting()"
        [loading]="isSubmitting()"
        styleClass="flex-1"
      />
    </div>
  }
</div>
